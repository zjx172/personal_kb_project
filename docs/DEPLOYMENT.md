# WisdomVault æœåŠ¡å™¨éƒ¨ç½²æŒ‡å—

## ä¸€ã€æœåŠ¡å™¨æ¨èï¼ˆå›½å†…ï¼‰

### æ¨èæ–¹æ¡ˆå¯¹æ¯”

#### 1. **è…¾è®¯äº‘è½»é‡åº”ç”¨æœåŠ¡å™¨**ï¼ˆæœ€æ¨è â­â­â­â­â­ï¼‰

**ä¼˜åŠ¿ï¼š**

- ä»·æ ¼ä¾¿å®œï¼Œæ–°ç”¨æˆ·é¦–å¹´ 24-60 å…ƒ/æœˆ
- è‡ªå¸¦åº”ç”¨é•œåƒï¼ˆWordPressã€Node.js ç­‰ï¼‰ï¼Œå¯å¿«é€Ÿéƒ¨ç½²
- å¸¦å®½å……è¶³ï¼ˆ6-8Mbpsï¼‰ï¼Œé€‚åˆä¸ªäººé¡¹ç›®
- ç®¡ç†ç•Œé¢ç®€å•ï¼Œç»´æŠ¤ä¾¿æ·
- å›½å†…è®¿é—®é€Ÿåº¦å¿«

**æ¨èé…ç½®ï¼š**

- **å…¥é—¨çº§**ï¼š2 æ ¸ 2Gï¼Œ40GB SSDï¼Œ6Mbpsï¼Œçº¦ **24 å…ƒ/æœˆ**ï¼ˆæ–°ç”¨æˆ·é¦–å¹´ï¼‰
- **æ¨èçº§**ï¼š2 æ ¸ 4Gï¼Œ60GB SSDï¼Œ8Mbpsï¼Œçº¦ **60 å…ƒ/æœˆ**ï¼ˆæ–°ç”¨æˆ·é¦–å¹´ï¼‰
- **æ€§èƒ½çº§**ï¼š4 æ ¸ 8Gï¼Œ80GB SSDï¼Œ10Mbpsï¼Œçº¦ **120 å…ƒ/æœˆ**

**è´­ä¹°é“¾æ¥ï¼š** <https://cloud.tencent.com/act/pro/lighthouse>

**é€‚ç”¨åœºæ™¯ï¼š** ä¸ªäººä½¿ç”¨ã€å°å›¢é˜Ÿã€é¢„ç®—æœ‰é™

---

#### 2. **é˜¿é‡Œäº‘è½»é‡åº”ç”¨æœåŠ¡å™¨**ï¼ˆæ¨è â­â­â­â­ï¼‰

**ä¼˜åŠ¿ï¼š**

- ä»·æ ¼é€‚ä¸­ï¼Œæ–°ç”¨æˆ·æœ‰ä¼˜æƒ 
- ç¨³å®šæ€§å¥½ï¼Œé€‚åˆç”Ÿäº§ç¯å¢ƒ
- å¸¦å®½å……è¶³
- æœ‰ä¸°å¯Œçš„åº”ç”¨é•œåƒ

**æ¨èé…ç½®ï¼š**

- **å…¥é—¨çº§**ï¼š2 æ ¸ 2Gï¼Œ40GB SSDï¼Œ5Mbpsï¼Œçº¦ **24 å…ƒ/æœˆ**ï¼ˆæ–°ç”¨æˆ·ï¼‰
- **æ¨èçº§**ï¼š2 æ ¸ 4Gï¼Œ60GB SSDï¼Œ6Mbpsï¼Œçº¦ **60 å…ƒ/æœˆ**ï¼ˆæ–°ç”¨æˆ·ï¼‰

**è´­ä¹°é“¾æ¥ï¼š** <https://www.aliyun.com/product/swas>

**é€‚ç”¨åœºæ™¯ï¼š** éœ€è¦æ›´é«˜ç¨³å®šæ€§ï¼Œé¢„ç®—ç¨é«˜

---

#### 3. **åä¸ºäº‘äº‘è€€äº‘æœåŠ¡å™¨**ï¼ˆæ¨è â­â­â­â­ï¼‰

**ä¼˜åŠ¿ï¼š**

- æ€§ä»·æ¯”é«˜
- é€‚åˆä¼ä¸šç”¨æˆ·
- æœ‰ä¸°å¯Œçš„åº”ç”¨å¸‚åœº

**æ¨èé…ç½®ï¼š**

- **å…¥é—¨çº§**ï¼š2 æ ¸ 2Gï¼Œ40GB SSDï¼Œ5Mbpsï¼Œçº¦ **30 å…ƒ/æœˆ**

**é€‚ç”¨åœºæ™¯ï¼š** ä¼ä¸šç”¨æˆ·ã€éœ€è¦æ›´å¤šæŠ€æœ¯æ”¯æŒ

---

### æœ€ç»ˆæ¨è

**é¦–é€‰ï¼šè…¾è®¯äº‘è½»é‡åº”ç”¨æœåŠ¡å™¨ 2 æ ¸ 4G é…ç½®**

- ä»·æ ¼ï¼šæ–°ç”¨æˆ·é¦–å¹´çº¦ 60 å…ƒ/æœˆï¼Œç»­è´¹çº¦ 120 å…ƒ/æœˆ
- æ€§èƒ½ï¼šè¶³å¤Ÿè¿è¡Œ RAG ç³»ç»Ÿ
- ç»´æŠ¤ï¼šç®€å•ä¾¿æ·ï¼Œæœ‰å¯è§†åŒ–æ§åˆ¶å°
- å¸¦å®½ï¼š8Mbps è¶³å¤Ÿä¸ªäººä½¿ç”¨

---

## äºŒã€å¿«é€Ÿéƒ¨ç½²æµç¨‹

### æ­¥éª¤ 1ï¼šè´­ä¹°å¹¶åˆå§‹åŒ–æœåŠ¡å™¨

1. **è´­ä¹°è…¾è®¯äº‘è½»é‡åº”ç”¨æœåŠ¡å™¨**

   - é€‰æ‹©ï¼š2 æ ¸ 4Gï¼Œ60GB SSDï¼Œ8Mbps
   - åœ°åŸŸï¼šé€‰æ‹©ç¦»ä½ æœ€è¿‘çš„ï¼ˆå¦‚ï¼šåŒ—äº¬ã€ä¸Šæµ·ã€å¹¿å·ï¼‰
   - é•œåƒï¼šé€‰æ‹© **Ubuntu 22.04 LTS** æˆ– **CentOS 7.9**
   - è®¾ç½® root å¯†ç å¹¶è®°å½•

2. **é…ç½®å®‰å…¨ç»„**

   - å¼€æ”¾ç«¯å£ï¼š22 (SSH)ã€80 (HTTP)ã€443 (HTTPS)
   - åœ¨æ§åˆ¶å° â†’ é˜²ç«å¢™ â†’ æ·»åŠ è§„åˆ™

3. **è¿æ¥æœåŠ¡å™¨**

   ```bash
   ssh root@ä½ çš„æœåŠ¡å™¨IP
   ```

---

### æ­¥éª¤ 2ï¼šä¸€é”®å®‰è£…åŸºç¡€ç¯å¢ƒ

åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼ˆå¤åˆ¶ç²˜è´´å³å¯ï¼‰ï¼š

```bash
# æ›´æ–°ç³»ç»Ÿ
apt update && apt upgrade -y

# å®‰è£… Python 3.9+ å’Œ pip
apt install -y python3.9 python3.9-venv python3-pip python3.9-dev

# å®‰è£… Node.js 18+ (ä½¿ç”¨ NodeSource)
curl -fsSL https://deb.nodesource.com/setup_18.x | bash -
apt install -y nodejs

# å®‰è£… pnpm
npm install -g pnpm

# å®‰è£… Nginx
apt install -y nginx

# å®‰è£… Supervisor (è¿›ç¨‹ç®¡ç†)
apt install -y supervisor

# å®‰è£… Git
apt install -y git

# å®‰è£… Certbot (SSL è¯ä¹¦)
apt install -y certbot python3-certbot-nginx

# é…ç½®é˜²ç«å¢™
ufw allow 22/tcp
ufw allow 80/tcp
ufw allow 443/tcp
ufw --force enable
```

---

### æ­¥éª¤ 3ï¼šéƒ¨ç½²é¡¹ç›®ä»£ç 

#### æ–¹å¼ Aï¼šä½¿ç”¨ Gitï¼ˆæ¨èï¼‰

```bash
# åˆ›å»ºé¡¹ç›®ç›®å½•
mkdir -p /var/www/wisdomvault
cd /var/www/wisdomvault

# å…‹éš†é¡¹ç›®ï¼ˆæ›¿æ¢ä¸ºä½ çš„ä»“åº“åœ°å€ï¼‰
git clone https://github.com/yourusername/wisdomvault.git .

# æˆ–è€…å¦‚æœä½¿ç”¨ç§æœ‰ä»“åº“ï¼Œéœ€è¦å…ˆé…ç½® SSH key
```

#### æ–¹å¼ Bï¼šä½¿ç”¨ SCP ä¸Šä¼ ï¼ˆå¦‚æœä»£ç åœ¨æœ¬åœ°ï¼‰

åœ¨**æœ¬åœ°ç”µè„‘**æ‰§è¡Œï¼š

```bash
# æ‰“åŒ…é¡¹ç›®ï¼ˆæ’é™¤ node_modules å’Œ venvï¼‰
cd /path/to/personal_kb_project
tar --exclude='node_modules' --exclude='venv' --exclude='.git' \
    -czf wisdomvault.tar.gz .

# ä¸Šä¼ åˆ°æœåŠ¡å™¨
scp wisdomvault.tar.gz root@ä½ çš„æœåŠ¡å™¨IP:/var/www/

# åœ¨æœåŠ¡å™¨ä¸Šè§£å‹
ssh root@ä½ çš„æœåŠ¡å™¨IP
cd /var/www
tar -xzf wisdomvault.tar.gz -C wisdomvault
```

---

### æ­¥éª¤ 4ï¼šé…ç½®åç«¯

```bash
cd /var/www/wisdomvault/backend

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3 -m venv venv
source venv/bin/activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# åˆ›å»ºå¿…è¦çš„ç›®å½•
mkdir -p uploads/pdfs
mkdir -p vector_store

# åˆ›å»º .env æ–‡ä»¶
cat > .env << 'EOF'
# OpenAI é…ç½®
OPENAI_API_KEY=your-openai-api-key
OPENAI_BASE_URL=https://api.openai.com/v1

# Google OAuth é…ç½®ï¼ˆéœ€è¦æ›´æ–°ä¸ºä½ çš„åŸŸåï¼‰
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_REDIRECT_URI=https://yourdomain.com/auth/google/callback

# JWT é…ç½®ï¼ˆç”Ÿæˆå¼ºéšæœºå¯†é’¥ï¼‰
JWT_SECRET_KEY=$(python3 -c "import secrets; print(secrets.token_urlsafe(32))")

# LangSmith é…ç½®ï¼ˆå¯é€‰ï¼‰
LANGCHAIN_API_KEY=
LANGCHAIN_TRACING_V2=false
LANGCHAIN_PROJECT=wisdomvault-rag
LANGCHAIN_ENDPOINT=https://api.smith.langchain.com
EOF

# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥çœŸå®çš„é…ç½®
nano .env

# åˆå§‹åŒ–æ•°æ®åº“ï¼ˆä½¿ç”¨é¡¹ç›®è‡ªå¸¦çš„è„šæœ¬ï¼‰
python3 init_db.py

# åˆå§‹åŒ–è¯„ä¼°åŠŸèƒ½ï¼ˆå¯é€‰ï¼‰
python3 migrate_evaluation.py
```

**é‡è¦ï¼š** ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œå¡«å…¥ï¼š

- ä½ çš„ OpenAI API Key
- Google OAuth å‡­æ®ï¼ˆéœ€è¦åœ¨ Google Cloud Console é…ç½®ç”Ÿäº§åŸŸåï¼‰
- ç”Ÿæˆçš„ JWT Secret Key

---

### æ­¥éª¤ 5ï¼šé…ç½®å‰ç«¯

```bash
cd /var/www/wisdomvault/frontend

# å®‰è£…ä¾èµ–
pnpm install

# ä¿®æ”¹ API åœ°å€ï¼ˆä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–ç›´æ¥ä¿®æ”¹ï¼‰
# ç¼–è¾‘ src/api.tsï¼Œå°† API_BASE_URL æ”¹ä¸ºä½ çš„åŸŸå
# ä¾‹å¦‚ï¼šconst API_BASE_URL = "https://api.yourdomain.com";

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm run build
```

**ä¿®æ”¹ API åœ°å€ï¼š**

ç¼–è¾‘ `frontend/src/api.ts`ï¼š

```typescript
// ç”Ÿäº§ç¯å¢ƒ
const API_BASE_URL =
  process.env.VITE_API_BASE_URL || "https://api.yourdomain.com";
```

æˆ–è€…ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼š

```bash
# åˆ›å»º .env.production
echo "VITE_API_BASE_URL=https://api.yourdomain.com" > .env.production

# é‡æ–°æ„å»º
pnpm run build
```

---

### æ­¥éª¤ 6ï¼šé…ç½® Supervisorï¼ˆè¿›ç¨‹ç®¡ç†ï¼‰

```bash
# åˆ›å»ºæ—¥å¿—ç›®å½•
mkdir -p /var/log/wisdomvault

# åˆ›å»º Supervisor é…ç½®
cat > /etc/supervisor/conf.d/wisdomvault-backend.conf << 'EOF'
[program:wisdomvault-backend]
command=/var/www/wisdomvault/backend/venv/bin/uvicorn app:app --host 0.0.0.0 --port 8000 --workers 2
directory=/var/www/wisdomvault/backend
user=root
autostart=true
autorestart=true
stderr_logfile=/var/log/wisdomvault/backend_error.log
stdout_logfile=/var/log/wisdomvault/backend_access.log
environment=PATH="/var/www/wisdomvault/backend/venv/bin"
EOF

# é‡æ–°åŠ è½½ Supervisor
supervisorctl reread
supervisorctl update
supervisorctl start wisdomvault-backend

# æŸ¥çœ‹çŠ¶æ€
supervisorctl status wisdomvault-backend
```

---

### æ­¥éª¤ 7ï¼šé…ç½® Nginx

```bash
# åˆ›å»º Nginx é…ç½®
cat > /etc/nginx/sites-available/wisdomvault << 'EOF'
# å‰ç«¯é™æ€æ–‡ä»¶
server {
    listen 80;
    server_name yourdomain.com www.yourdomain.com;

    root /var/www/wisdomvault/frontend/dist;
    index index.html;

    # å‰ç«¯è·¯ç”±
    location / {
        try_files $uri $uri/ /index.html;
    }

    # åç«¯ API ä»£ç†
    location ~ ^/(auth|query|docs|conversations|knowledge-bases|evaluation|upload-pdf|extract-web|tasks|highlights|search-history) {
        proxy_pass http://127.0.0.1:8000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
        proxy_buffering off;
        proxy_read_timeout 300s;
    }

    # é™æ€èµ„æºç¼“å­˜
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
}
EOF

# æ›¿æ¢åŸŸåï¼ˆå°† yourdomain.com æ›¿æ¢ä¸ºä½ çš„å®é™…åŸŸåï¼‰
sed -i 's/yourdomain.com/ä½ çš„åŸŸå/g' /etc/nginx/sites-available/wisdomvault

# å¯ç”¨é…ç½®
ln -s /etc/nginx/sites-available/wisdomvault /etc/nginx/sites-enabled/

# æµ‹è¯•é…ç½®
nginx -t

# é‡å¯ Nginx
systemctl restart nginx
```

---

### æ­¥éª¤ 8ï¼šé…ç½® SSL è¯ä¹¦ï¼ˆHTTPSï¼‰

```bash
# è·å– SSL è¯ä¹¦ï¼ˆLet's Encrypt å…è´¹ï¼‰
certbot --nginx -d yourdomain.com -d www.yourdomain.com

# æŒ‰ç…§æç¤ºè¾“å…¥é‚®ç®±ç­‰ä¿¡æ¯
# Certbot ä¼šè‡ªåŠ¨é…ç½® Nginx

# æµ‹è¯•è‡ªåŠ¨ç»­æœŸ
certbot renew --dry-run
```

---

### æ­¥éª¤ 9ï¼šé…ç½® Google OAuthï¼ˆé‡è¦ï¼‰

1. **è®¿é—® Google Cloud Console**

   - <https://console.cloud.google.com/>

2. **æ›´æ–° OAuth é…ç½®**

   - è¿›å…¥ï¼šAPI å’Œå‡­æ® â†’ OAuth 2.0 å®¢æˆ·ç«¯ ID
   - ç¼–è¾‘ä½ çš„å®¢æˆ·ç«¯ ID
   - æ·»åŠ æˆæƒé‡å®šå‘ URIï¼š`https://yourdomain.com/auth/google/callback`
   - ä¿å­˜

3. **æ›´æ–°æœåŠ¡å™¨ä¸Šçš„ .env æ–‡ä»¶**

   ```bash
   nano /var/www/wisdomvault/backend/.env
   # æ›´æ–° GOOGLE_REDIRECT_URI
   ```

4. **é‡å¯åç«¯æœåŠ¡**

   ```bash
   supervisorctl restart wisdomvault-backend
   ```

---

## ä¸‰ã€æ•°æ®è¿ç§»ï¼ˆå¦‚æœæœ‰æœ¬åœ°æ•°æ®ï¼‰

### å¤‡ä»½æœ¬åœ°æ•°æ®

åœ¨**æœ¬åœ°ç”µè„‘**æ‰§è¡Œï¼š

```bash
# å¤‡ä»½æ•°æ®åº“
scp /path/to/backend/kb.db root@æœåŠ¡å™¨IP:/tmp/kb_backup.db

# å¤‡ä»½å‘é‡æ•°æ®åº“
tar -czf vector_store_backup.tar.gz /path/to/backend/vector_store
scp vector_store_backup.tar.gz root@æœåŠ¡å™¨IP:/tmp/

# å¤‡ä»½ä¸Šä¼ æ–‡ä»¶
tar -czf uploads_backup.tar.gz /path/to/backend/uploads
scp uploads_backup.tar.gz root@æœåŠ¡å™¨IP:/tmp/
```

### æ¢å¤æ•°æ®åˆ°æœåŠ¡å™¨

åœ¨**æœåŠ¡å™¨**ä¸Šæ‰§è¡Œï¼š

```bash
# åœæ­¢æœåŠ¡
supervisorctl stop wisdomvault-backend

# æ¢å¤æ•°æ®åº“
cp /tmp/kb_backup.db /var/www/wisdomvault/backend/kb.db

# æ¢å¤å‘é‡æ•°æ®åº“
cd /var/www/wisdomvault/backend
tar -xzf /tmp/vector_store_backup.tar.gz

# æ¢å¤ä¸Šä¼ æ–‡ä»¶
tar -xzf /tmp/uploads_backup.tar.gz

# å¯åŠ¨æœåŠ¡
supervisorctl start wisdomvault-backend
```

---

## å››ã€æ—¥å¸¸ç»´æŠ¤

### æŸ¥çœ‹æ—¥å¿—

```bash
# åç«¯æ—¥å¿—
tail -f /var/log/wisdomvault/backend_access.log
tail -f /var/log/wisdomvault/backend_error.log

# Nginx æ—¥å¿—
tail -f /var/log/nginx/access.log
tail -f /var/log/nginx/error.log
```

### é‡å¯æœåŠ¡

```bash
# é‡å¯åç«¯
supervisorctl restart wisdomvault-backend

# é‡å¯ Nginx
systemctl restart nginx

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
supervisorctl status
systemctl status nginx
```

### æ›´æ–°ä»£ç 

```bash
cd /var/www/wisdomvault

# æ‹‰å–æœ€æ–°ä»£ç 
git pull

# æ›´æ–°åç«¯ä¾èµ–ï¼ˆå¦‚æœæœ‰å˜åŒ–ï¼‰
cd backend
source venv/bin/activate
pip install -r requirements.txt

# è¿è¡Œæ•°æ®åº“è¿ç§»ï¼ˆå¦‚æœæœ‰ï¼‰
python3 init_db.py
python3 migrate_evaluation.py

# é‡å¯åç«¯
supervisorctl restart wisdomvault-backend

# æ›´æ–°å‰ç«¯
cd ../frontend
pnpm install
pnpm run build

# é‡å¯ Nginxï¼ˆé€šå¸¸ä¸éœ€è¦ï¼‰
systemctl reload nginx
```

### è‡ªåŠ¨å¤‡ä»½è„šæœ¬

åˆ›å»ºå¤‡ä»½è„šæœ¬ `/var/www/wisdomvault/backup.sh`ï¼š

```bash
#!/bin/bash
BACKUP_DIR="/var/backups/wisdomvault"
DATE=$(date +%Y%m%d_%H%M%S)

mkdir -p $BACKUP_DIR

# å¤‡ä»½æ•°æ®åº“
cp /var/www/wisdomvault/backend/kb.db $BACKUP_DIR/kb_$DATE.db

# å¤‡ä»½å‘é‡æ•°æ®åº“
tar -czf $BACKUP_DIR/vector_store_$DATE.tar.gz -C /var/www/wisdomvault/backend vector_store

# å¤‡ä»½ä¸Šä¼ æ–‡ä»¶
tar -czf $BACKUP_DIR/uploads_$DATE.tar.gz -C /var/www/wisdomvault/backend uploads

# åˆ é™¤ 7 å¤©å‰çš„å¤‡ä»½
find $BACKUP_DIR -type f -mtime +7 -delete

echo "Backup completed: $DATE"
```

è®¾ç½®å¯æ‰§è¡Œå¹¶æ·»åŠ åˆ°å®šæ—¶ä»»åŠ¡ï¼š

```bash
chmod +x /var/www/wisdomvault/backup.sh

# æ·»åŠ åˆ° crontabï¼ˆæ¯å¤©å‡Œæ™¨ 2 ç‚¹å¤‡ä»½ï¼‰
crontab -e
# æ·»åŠ ï¼š
0 2 * * * /var/www/wisdomvault/backup.sh >> /var/log/wisdomvault/backup.log 2>&1
```

---

## äº”ã€æ€§èƒ½ä¼˜åŒ–ï¼ˆå¯é€‰ï¼‰

### ä½¿ç”¨ Gunicornï¼ˆæå‡æ€§èƒ½ï¼‰

```bash
cd /var/www/wisdomvault/backend
source venv/bin/activate
pip install gunicorn

# ä¿®æ”¹ Supervisor é…ç½®
nano /etc/supervisor/conf.d/wisdomvault-backend.conf
# å°† command æ”¹ä¸ºï¼š
# command=/var/www/wisdomvault/backend/venv/bin/gunicorn app:app -w 2 -k uvicorn.workers.UvicornWorker --bind 0.0.0.0:8000

supervisorctl reread
supervisorctl update
supervisorctl restart wisdomvault-backend
```

### å¯ç”¨ Nginx ç¼“å­˜ï¼ˆå¯é€‰ï¼‰

åœ¨ Nginx é…ç½®ä¸­æ·»åŠ ï¼š

```nginx
proxy_cache_path /var/cache/nginx levels=1:2 keys_zone=api_cache:10m max_size=100m inactive=60m;

server {
    # ... å…¶ä»–é…ç½®

    location ~ ^/(query|docs|conversations) {
        proxy_cache api_cache;
        proxy_cache_valid 200 5m;
        # ... å…¶ä»– proxy é…ç½®
    }
}
```

---

## å…­ã€æ•…éšœæ’æŸ¥

### åç«¯æ— æ³•å¯åŠ¨

```bash
# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
tail -50 /var/log/wisdomvault/backend_error.log

# æ£€æŸ¥ç¯å¢ƒå˜é‡
cd /var/www/wisdomvault/backend
source venv/bin/activate
python3 -c "from config import *; print('Config OK')"

# æ‰‹åŠ¨æµ‹è¯•å¯åŠ¨
uvicorn app:app --host 0.0.0.0 --port 8000
```

### å‰ç«¯æ— æ³•è®¿é—®

```bash
# æ£€æŸ¥ Nginx é…ç½®
nginx -t

# æ£€æŸ¥æ–‡ä»¶æƒé™
ls -la /var/www/wisdomvault/frontend/dist

# æ£€æŸ¥ Nginx é”™è¯¯æ—¥å¿—
tail -50 /var/log/nginx/error.log
```

### OAuth ç™»å½•å¤±è´¥

1. æ£€æŸ¥ Google OAuth é…ç½®ä¸­çš„å›è°ƒ URL
2. æ£€æŸ¥æœåŠ¡å™¨ä¸Šçš„ `.env` æ–‡ä»¶ä¸­çš„ `GOOGLE_REDIRECT_URI`
3. ç¡®ä¿åŸŸåå·²é…ç½® SSL è¯ä¹¦ï¼ˆHTTPSï¼‰

### å‘é‡æ£€ç´¢æ…¢

```bash
# æ£€æŸ¥ç£ç›˜ç©ºé—´
df -h

# æ£€æŸ¥å‘é‡æ•°æ®åº“æ–‡ä»¶æƒé™
ls -la /var/www/wisdomvault/backend/vector_store

# æ£€æŸ¥å†…å­˜ä½¿ç”¨
free -h
```

---

## ä¸ƒã€è´¹ç”¨ä¼°ç®—

### è…¾è®¯äº‘è½»é‡åº”ç”¨æœåŠ¡å™¨ï¼ˆæ¨èé…ç½®ï¼‰

- **æœåŠ¡å™¨**ï¼š2 æ ¸ 4Gï¼Œ60GB SSDï¼Œ8Mbps

  - æ–°ç”¨æˆ·é¦–å¹´ï¼šçº¦ **60 å…ƒ/æœˆ**ï¼ˆ720 å…ƒ/å¹´ï¼‰
  - ç»­è´¹ï¼šçº¦ **120 å…ƒ/æœˆ**ï¼ˆ1440 å…ƒ/å¹´ï¼‰

- **åŸŸå**ï¼ˆå¯é€‰ï¼‰ï¼š

  - .com åŸŸåï¼šçº¦ **55-70 å…ƒ/å¹´**
  - .cn åŸŸåï¼šçº¦ **30-50 å…ƒ/å¹´**

- **SSL è¯ä¹¦**ï¼šå…è´¹ï¼ˆLet's Encryptï¼‰

- **å…¶ä»–è´¹ç”¨**ï¼š
  - OpenAI APIï¼šæŒ‰ä½¿ç”¨é‡è®¡è´¹ï¼ˆçº¦ 0.002-0.01 å…ƒ/æ¬¡æŸ¥è¯¢ï¼‰
  - Google OAuthï¼šå…è´¹

**æ€»è®¡ï¼ˆé¦–å¹´ï¼‰**ï¼šçº¦ **800-900 å…ƒ/å¹´**ï¼ˆåŒ…å«åŸŸåï¼‰

---

## å…«ã€å®‰å…¨æ£€æŸ¥æ¸…å•

éƒ¨ç½²å‰æ£€æŸ¥ï¼š

- [ ] å·²æ›´æ–°æ‰€æœ‰ç¯å¢ƒå˜é‡ä¸ºç”Ÿäº§å€¼
- [ ] å·²ç”Ÿæˆå¼ºéšæœº JWT Secret Key
- [ ] å·²é…ç½® Google OAuth ç”Ÿäº§åŸŸå
- [ ] å·²å¯ç”¨ HTTPSï¼ˆSSL è¯ä¹¦ï¼‰
- [ ] å·²é…ç½®é˜²ç«å¢™è§„åˆ™
- [ ] å·²è®¾ç½®æ–‡ä»¶æƒé™ï¼ˆæ•æ„Ÿæ–‡ä»¶ä¸å¯å…¬å¼€è®¿é—®ï¼‰
- [ ] å·²é…ç½®è‡ªåŠ¨å¤‡ä»½
- [ ] å·²æµ‹è¯•æ‰€æœ‰åŠŸèƒ½æ­£å¸¸

---

## ä¹ã€å¿«é€Ÿå‘½ä»¤å‚è€ƒ

```bash
# æŸ¥çœ‹åç«¯çŠ¶æ€
supervisorctl status wisdomvault-backend

# é‡å¯åç«¯
supervisorctl restart wisdomvault-backend

# æŸ¥çœ‹åç«¯æ—¥å¿—
tail -f /var/log/wisdomvault/backend_access.log

# é‡å¯ Nginx
systemctl restart nginx

# æŸ¥çœ‹ Nginx çŠ¶æ€
systemctl status nginx

# æµ‹è¯• Nginx é…ç½®
nginx -t

# æ›´æ–° SSL è¯ä¹¦
certbot renew

# æŸ¥çœ‹ç£ç›˜ä½¿ç”¨
df -h

# æŸ¥çœ‹å†…å­˜ä½¿ç”¨
free -h

# æŸ¥çœ‹è¿›ç¨‹
ps aux | grep uvicorn
```

---

## åã€æŠ€æœ¯æ”¯æŒ

å¦‚é‡é—®é¢˜ï¼Œå¯ä»¥ï¼š

1. æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶å®šä½é—®é¢˜
2. æ£€æŸ¥é…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®
3. ç¡®è®¤æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ
4. å‚è€ƒé¡¹ç›® README.md ä¸­çš„è¯´æ˜

---

**éƒ¨ç½²å®Œæˆåï¼Œè®¿é—®ä½ çš„åŸŸåå³å¯ä½¿ç”¨ WisdomVaultï¼** ğŸ‰
